'use strict';

(function () {

  angular.module('megabyte.funny-pets').controller('UserController', function ($http, $rootScope) {

    var user = this;

    user.loginLink = '/login';
    $http.get('/auth/lastLoggedFrom').then(function (res) {
      if (res.data.provider) {
        user.loginLink = '/auth/' + res.data.provider;
      }
    });

    $http.get('/api').then(function (res) {
      user.data = res.data;
      $rootScope.loggedIn = res.data.id;
    });

    user.loginClick = function () {
      window.location = $('#loginlink').attr('href');
    };

    $('.link-to-login').on('click', function () {
      user.loginClick();
    });
  });
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVyLmNsaWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsQ0FBQyxZQUFZOztBQUVWLFNBQU8sQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FFbEMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLFVBQVMsS0FBSyxFQUFFLFVBQVUsRUFBRTs7QUFFeEQsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDOztBQUdoQixRQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztBQUMxQixTQUFLLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsR0FBRyxFQUFDO0FBQ25ELFVBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUM7QUFDakIsWUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLEdBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7T0FDL0M7S0FDRCxDQUFDLENBQUM7O0FBR0gsU0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxHQUFHLEVBQUM7QUFDbEMsVUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQ3JCLGdCQUFVLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO0tBQ25DLENBQUMsQ0FBQzs7QUFFSCxRQUFJLENBQUMsVUFBVSxHQUFHLFlBQVU7QUFDeEIsWUFBTSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2xELENBQUE7O0FBRUQsS0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxZQUFVO0FBQ3ZDLFVBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztLQUNwQixDQUFDLENBQUM7R0FFSixDQUFDLENBQUM7Q0FHUCxDQUFBLEVBQUcsQ0FBQyIsImZpbGUiOiJ1c2VyQ29udHJvbGxlci5jbGllbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgIGFuZ3VsYXIubW9kdWxlKCdtZWdhYnl0ZS5mdW5ueS1wZXRzJylcblxuICAgICAuY29udHJvbGxlcignVXNlckNvbnRyb2xsZXInLCBmdW5jdGlvbigkaHR0cCwgJHJvb3RTY29wZSkge1xuICAgICAgICAgXG4gICAgICAgdmFyIHVzZXIgPSB0aGlzO1xuICAgICAgIFxuICAgICAgIFxuICAgICAgIHVzZXIubG9naW5MaW5rID0gJy9sb2dpbic7XG4gICAgICAgJGh0dHAuZ2V0KCcvYXV0aC9sYXN0TG9nZ2VkRnJvbScpLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgaWYocmVzLmRhdGEucHJvdmlkZXIpe1xuICAgICAgICAgICAgdXNlci5sb2dpbkxpbmsgPSAnL2F1dGgvJytyZXMuZGF0YS5wcm92aWRlcjtcbiAgICAgICAgfVxuICAgICAgIH0pO1xuXG4gICAgICAgXG4gICAgICAgJGh0dHAuZ2V0KCcvYXBpJykudGhlbihmdW5jdGlvbihyZXMpe1xuICAgICAgICAgdXNlci5kYXRhID0gcmVzLmRhdGE7XG4gICAgICAgICAkcm9vdFNjb3BlLmxvZ2dlZEluID0gcmVzLmRhdGEuaWQ7XG4gICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgIHVzZXIubG9naW5DbGljayA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICQoJyNsb2dpbmxpbmsnKS5hdHRyKCdocmVmJyk7XG4gICAgICAgfVxuICAgICAgICBcbiAgICAgICAkKCcubGluay10by1sb2dpbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgdXNlci5sb2dpbkNsaWNrKCk7XG4gICAgICAgfSk7XG4gICAgICAgIFxuICAgICB9KTtcblxuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
